(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{365:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"表情包自定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表情包自定义"}},[t._v("#")]),t._v(" 表情包自定义")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("这个插件必须要求 酷Q Pro 版本，因为要发送图片。"),s("br"),t._v("\n同时保证所有配置文件在 UTF-8 编码下保存。"),s("br"),t._v("\n若为 ANSI ，可使用 NotePad++ 编码 -> 转为 UTF-8")])]),t._v(" "),s("h2",{attrs:{id:"部署流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署流程"}},[t._v("#")]),t._v(" 部署流程")]),t._v(" "),s("h3",{attrs:{id:"解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[t._v("#")]),t._v(" 解压")]),t._v(" "),s("p",[t._v("将 "),s("a",{attrs:{href:"https://github.com/fz6m/nonebot-plugin/releases/download/0.1/ImageCustom.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("本插件"),s("OutboundLink")],1),t._v(" 下载解压，将解压得到的 "),s("code",[t._v("CQimage")]),t._v(" 文件夹放在 酷Q 根目录下，为了保证路径不出错误，还要检查如下事项："),s("br"),t._v("\n保证你的 NoneBot 主程序 "),s("code",[t._v("main.py(这里假设为main.py)")]),t._v(" 和 "),s("code",[t._v("image")]),t._v(" 以及 "),s("code",[t._v("image_data")]),t._v(" 两个文件夹在同一级目录，文件夹 "),s("code",[t._v("CQimage")]),t._v(" 里已经包含了一个示例主程序 "),s("code",[t._v("main.py")]),t._v(" 可供参考，如果你还有其他插件，你可以直接把 "),s("code",[t._v("main.py")]),t._v(" 中有关导入本插件的部分拷贝进你的主程序 "),s("code",[t._v("_.py")]),t._v(" 文件。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入本插件")]),t._v("\n    nonebot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load_plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("p",[t._v("本插件依赖处理图片的 python 库，需要安装以下依赖：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pillow\n")])])]),s("h3",{attrs:{id:"设置用户指南图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置用户指南图片"}},[t._v("#")]),t._v(" 设置用户指南图片")]),t._v(" "),s("p",[t._v("本插件自身附带了一些表情，可供基本使用。之后会专门讲解如何自定义新的表情包。"),s("br"),t._v("\n为了方便用户一键调出可以切换的表情有哪些，本插件在 "),s("code",[t._v("CQimage")]),t._v(" 文件夹内提供了一个极其简易的列表图片，请将此 "),s("code",[t._v("list.jpg")]),t._v(" 文件移动到 "),s("code",[t._v("酷Q/data/image/")]),t._v(" 文件夹内，以便用户在群内发送指令：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    img list\n")])])]),s("p",[t._v("以上指令可以触发用户指南图片 "),s("code",[t._v("list.jpg")]),t._v(" 的发送，如果想要用自己的用户指南图片，更换该图片文件即可，不过图片名字不能更改，必须为 "),s("code",[t._v("list.jpg")]),t._v(" !"),s("br")]),t._v(" "),s("p",[t._v("到此为止，部署完毕。"),s("br"),t._v("\n启动 HttpApi 插件，在群内发送如下命令：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    xxxx.jpg\n    xxxx.JPG\n")])])]),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    rcnb.jpg\n    ???.JPG\n")])])]),s("p",[t._v("即可触发得到自定义的表情包。")]),t._v(" "),s("h2",{attrs:{id:"用户更换表情包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户更换表情包"}},[t._v("#")]),t._v(" 用户更换表情包")]),t._v(" "),s("p",[t._v("用户是通过别名来更换表情包的，用户不应该使用复杂的英文参数，这样不够友好，所以我们的表情包别名定义在 "),s("code",[t._v("image_data/bieming/")]),t._v(" 下的 "),s("code",[t._v("name.ini")]),t._v(" 中，格式如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    表情别名 表情id\n")])])]),s("p",[t._v("在后文自定义表情部分将介绍什么是 "),s("code",[t._v("表情id")]),t._v(" 。\n例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    狗妈1 kaguranana\n")])])]),s("p",[t._v("当用户在群内发送：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    img 图片的别名\n")])])]),s("p",[t._v("用户就会更换自己的表情包底图，每个用户使用的表情包是独立的，持久的，在下次更换之前不会改变。\n例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    img 狗妈1\n")])])]),s("p",[t._v("即可更换到别名标识为 "),s("code",[t._v("狗妈1")]),t._v(" 的表情包底图。")]),t._v(" "),s("h2",{attrs:{id:"自定义表情包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义表情包"}},[t._v("#")]),t._v(" 自定义表情包")]),t._v(" "),s("p",[t._v("用户是不可以自定义新表情包的，因为文字位置用户不能控制，必须由我们先定义好表情配置才能提供给用户使用。"),s("br"),t._v("\n流程如下：")]),t._v(" "),s("h3",{attrs:{id:"建立文件夹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#建立文件夹"}},[t._v("#")]),t._v(" 建立文件夹")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("image_data/")]),t._v(" 下建立一个由你决定的为 "),s("code",[t._v("表情id")]),t._v(" 的文件夹，假设为 "),s("code",[t._v("katsuna")]),t._v(" ，此时路径为 "),s("code",[t._v("image_data/katsuna/")]),t._v(" 。")]),t._v(" "),s("h3",{attrs:{id:"定义表情"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义表情"}},[t._v("#")]),t._v(" 定义表情")]),t._v(" "),s("p",[t._v("一张表情拥有一个独立的文件夹，在 "),s("code",[t._v("katsuna/")]),t._v(" 下建立一个表情配置文件 "),s("code",[t._v("config.ini")]),t._v(" ，来配置我们的表情，参数说明与格式如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图文件名，且必须与文件夹名相同")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("font_max")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图内添加文字可能的最大长度")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("font_size")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图内添加文字的尺寸，一般为40，小图30，大图50")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("font_center_x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图内添加文字的中心点x位")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("font_center_y")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图内添加文字的中心点y位（由上至下）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("color")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表情图内添加文字的颜色，一般为black/white")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("font_sub")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制文字大小衰减的档位，一般为5")])])])]),t._v(" "),s("p",[t._v("格式：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_size"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_center_x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_center_y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_sub"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"katsuna"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_max"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("230")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_size"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_center_x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("125")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_center_y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("278")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"black"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"font_sub"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"添加别名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加别名"}},[t._v("#")]),t._v(" 添加别名")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("image_data/bieming/name.ini")]),t._v(" 中，添加一行如下格式的别名标识：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    用户使用的别名 表情id\n")])])]),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    kora katsuna\n")])])]),s("p",[t._v("那么下次用户发送 "),s("code",[t._v("img kora")]),t._v(" ，就会更换到这个新的表情底图。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("三个一样")]),t._v(" "),s("p",[t._v("必须注意的是， "),s("code",[t._v("表情id")]),t._v(" 不光是文件夹的名字，也是配置文件中 "),s("code",[t._v("name")]),t._v(" 属性的值，也与提供给用户别名切换文件中的 第二个 参数相同。")])]),t._v(" "),s("h2",{attrs:{id:"剔除用户指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#剔除用户指南"}},[t._v("#")]),t._v(" 剔除用户指南")]),t._v(" "),s("p",[t._v("如果你觉得用户指南比较麻烦，可以剔除用户指南部分，可以在 "),s("code",[t._v("image/__init__.py")]),t._v(" 中删除如下部分代码：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("···\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"img list"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../data/image/list.jpg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            qun "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("qun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[CQ:image,file=list.jpg]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n···\n")])])]),s("h2",{attrs:{id:"设定表情配置的一种快捷方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设定表情配置的一种快捷方法"}},[t._v("#")]),t._v(" 设定表情配置的一种快捷方法")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"my-img",attrs:{src:t.$withBase("/guide_image.jpg")}})])}),[],!1,null,null,null);a.default=n.exports}}]);