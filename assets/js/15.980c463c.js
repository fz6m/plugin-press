(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{367:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pixiv-看图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pixiv-看图"}},[t._v("#")]),t._v(" Pixiv 看图")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("这个插件必须要求 酷Q Pro 版本，因为要发送图片。")])]),t._v(" "),a("h2",{attrs:{id:"部署流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署流程"}},[t._v("#")]),t._v(" 部署流程")]),t._v(" "),a("h3",{attrs:{id:"解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[t._v("#")]),t._v(" 解压")]),t._v(" "),a("p",[t._v("将 "),a("a",{attrs:{href:"https://github.com/fz6m/nonebot-plugin/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("本插件"),a("OutboundLink")],1),t._v(" 下载解压，将解压得到的 "),a("code",[t._v("CQPixiv")]),t._v(" 文件夹放在 酷Q 根目录下，为了保证路径不出错误，还要检查如下事项："),a("br"),t._v("\n保证你的 NoneBot 主程序 "),a("code",[t._v("main.py(这里假设为main.py)")]),t._v(" 和 "),a("code",[t._v("pixiv")]),t._v(" 文件夹在同一级目录，文件夹 "),a("code",[t._v("CQPixiv")]),t._v(" 里已经包含了一个示例主程序 "),a("code",[t._v("main.py")]),t._v(" 可供参考，如果你还有其他插件，你可以直接把 "),a("code",[t._v("main.py")]),t._v(" 中有关导入本插件的部分拷贝进你的主程序 "),a("code",[t._v("_.py")]),t._v(" 文件。")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入本插件")]),t._v("\n    nonebot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load_plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pixiv'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pixiv'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),a("p",[t._v("本插件需要安装以下依赖：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" ujson\n    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" python-dateutil\n    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pixivpy\n")])])]),a("p",[t._v("注：如果安装 "),a("code",[t._v("ujson")]),t._v(" 依赖失败，你可以不安装，从而会自动使用已有 "),a("code",[t._v("json")]),t._v(" 库代替 "),a("code",[t._v("ujson")]),t._v(" （性能较低），你也可以在 "),a("a",{attrs:{href:"https://www.lfd.uci.edu/~gohlke/pythonlibs/#ujson",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1),t._v(" 下载对应你 "),a("code",[t._v("python")]),t._v(" 版本和位数的 "),a("code",[t._v("ujson")]),t._v(" 安装包，之后执行本地安装即可：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 本地 ujson 安装包"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".whl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("路径\n")])])]),a("h3",{attrs:{id:"配置账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置账号"}},[t._v("#")]),t._v(" 配置账号")]),t._v(" "),a("p",[t._v("你需要准备一个 Pixiv 的账号，以保证能获取到 Pixiv 的图片地址信息，在 "),a("code",[t._v("CQPixiv/pixiv/data/account.json")]),t._v(" 内配置如下格式的账号密码信息即可：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"修改撤回时长"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改撤回时长"}},[t._v("#")]),t._v(" 修改撤回时长")]),t._v(" "),a("p",[t._v("本插件默认发送图片 30 s 后撤回，为什么这么设定，是因为有些情况是 r18 图，这样你的号就没了，很危险，所以需要手动更改这个时长，你可以在 "),a("code",[t._v("CQPixiv/pixiv/main.py")]),t._v(" 的第 "),a("code",[t._v("24")]),t._v(" 行找到如下部分：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("    messageID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" asyncio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 括号内的数字为撤回的秒数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messageID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("如果你不需要撤回，请把这三行注释掉，如下：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# messageID = message['message_id']")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# await asyncio.sleep(30)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# await bot.delete_msg(message_id = messageID)")]),t._v("\n")])])]),a("h3",{attrs:{id:"配置管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置管理员"}},[t._v("#")]),t._v(" 配置管理员")]),t._v(" "),a("p",[t._v("插件需要配置管理员才能启动收集图片功能，所以你需要在 "),a("code",[t._v("CQPixiv/pixiv/data/administrators.json")]),t._v(" 内配置管理员 QQ 号，如下格式：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"user"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456789")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("987654321")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("p",[t._v("插件默认是没有任何图包的，需要配置了管理员的账户使用收集图包命令。")]),t._v(" "),a("h3",{attrs:{id:"下载画师包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载画师包"}},[t._v("#")]),t._v(" 下载画师包")]),t._v(" "),a("p",[t._v("本插件目前只支持按画师 id 收集图包，所以画师 id 请提前自行确认，群内指令格式：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    kkt 画师id\n    kkt 28246124\n")])])]),a("p",[t._v("收集成功与失败均有相应的消息提示。")]),t._v(" "),a("p",[t._v("注：并不是真正下载画师的所以图片到本地，而是收集其图片地址信息，需要使用时再下载实际的图片。")]),t._v(" "),a("h3",{attrs:{id:"查看图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看图片"}},[t._v("#")]),t._v(" 查看图片")]),t._v(" "),a("p",[t._v("在群内使用如下指令可以 从目前所有画师的图包 中随机的抽取一张图片发送：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    图来\n    不够\n")])])]),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("h3",{attrs:{id:"增改指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增改指令"}},[t._v("#")]),t._v(" 增改指令")]),t._v(" "),a("p",[t._v("你可以在 "),a("code",[t._v("CQPixiv/pixiv/main.py")]),t._v(" 的第 38 行找到触发看图的指令列表：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("    drawingCommand "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'图来'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'不够'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("可以在第 43 行找到触发收集图片的前缀指令列表：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("    getResourceCommand "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kkt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"封号问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#封号问题"}},[t._v("#")]),t._v(" 封号问题")]),t._v(" "),a("p",[t._v("如果你的群里有内鬼，你可能会被以 "),a("strong",[t._v("组织相关传销、广告活动")]),t._v(" 封禁。")]),t._v(" "),a("p",[t._v("原理：因为你发一个指令就出一张图，所以系统认定你在组织活动。")])])}),[],!1,null,null,null);s.default=e.exports}}]);