(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{370:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"twitterpush"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#twitterpush"}},[t._v("#")]),t._v(" TwitterPush")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在使用本插件之前，要确保你可以科学上网，因为获取要获取推文。")])]),t._v(" "),s("h2",{attrs:{id:"部署流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署流程"}},[t._v("#")]),t._v(" 部署流程")]),t._v(" "),s("h3",{attrs:{id:"解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[t._v("#")]),t._v(" 解压")]),t._v(" "),s("p",[t._v("将 "),s("a",{attrs:{href:"https://github.com/fz6m/nonebot-plugin/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("本插件"),s("OutboundLink")],1),t._v(" 下载解压，将解压得到的 "),s("code",[t._v("CQtwitter")]),t._v(" 文件夹放在 酷Q 根目录下，为了保证路径不出错误，还要检查如下事项："),s("br"),t._v("\n保证你的 NoneBot 主程序 "),s("code",[t._v("main.py(这里假设为main.py)")]),t._v(" 和 "),s("code",[t._v("twitter")]),t._v(" 以及 "),s("code",[t._v("twitterConfig")]),t._v(" 两个文件夹在同一级目录，文件夹 "),s("code",[t._v("CQtwitter")]),t._v(" 里已经包含了一个示例主程序 "),s("code",[t._v("main.py")]),t._v(" 可供参考，如果你还有其他插件，你可以直接把 "),s("code",[t._v("main.py")]),t._v(" 中有关导入本插件的部分拷贝进你的主程序 "),s("code",[t._v("_.py")]),t._v(" 文件。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入本插件")]),t._v("\n    nonebot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load_plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'twitter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'twitter'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"配置翻译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置翻译"}},[t._v("#")]),t._v(" 配置翻译")]),t._v(" "),s("p",[t._v("为了获得良好的推文体验，还需配置你的翻译模块，这里推荐免费的 "),s("a",{attrs:{href:"https://api.fanyi.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度翻译"),s("OutboundLink")],1),t._v(" ，即申请即用。"),s("br"),t._v("\n申请之后你可以得到 百度 提供给你的 "),s("code",[t._v("appid")]),t._v(" 与 "),s("code",[t._v("secretKey")]),t._v(" ，配置在 "),s("code",[t._v("twitter/fanyi.py")]),t._v(" 内即可。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("appid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 你的appid")]),t._v("\nsecretKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 你的密钥")]),t._v("\n")])])]),s("h3",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("p",[t._v("你需要安装本插件依赖的几个 python 库，如下：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" requests\n    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" bs4\n")])])]),s("h3",{attrs:{id:"设定用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设定用户"}},[t._v("#")]),t._v(" 设定用户")]),t._v(" "),s("p",[t._v("下面在 "),s("code",[t._v("twitterConfig")]),t._v(" 文件夹内设定转发推文的目标账户。首先，在 "),s("code",[t._v("user.txt")]),t._v(" 内配置目标用户，参数说明和配置例子如下所示：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("id")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("转推的账户")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("每次获取的推文数量，一般设为 2")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("y")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("每次要推送的推文在数组中的位置，如果该用户有置顶推文设为 1 ，如果没有设为 0")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("推文里称呼该用户的名字")])])])]),t._v(" "),s("p",[t._v("格式：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("id x y name\n")])])]),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("minatoaqua 2 1 湊あくあ\n")])])]),s("p",[t._v("以上用户可以在 "),s("code",[t._v("user.txt")]),t._v("内配置多个，每个占一行。"),s("br"),s("br"),t._v("\n之后配置转发群的群号，在 "),s("code",[t._v("qun.txt")]),t._v(" 内按行填写，格式如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("群号 需要推送的账号name(要与上文中name对应)\n")])])]),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("12345678 湊あくあ\n")])])]),s("p",[t._v("如果要一群多个推送，即填写多行。")]),t._v(" "),s("h3",{attrs:{id:"调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调试"}},[t._v("#")]),t._v(" 调试")]),t._v(" "),s("p",[t._v("开始进行插件调试。"),s("br"),t._v("\n启动 HttpApi 插件，之后启动你的主程序，我们这里假设的是 "),s("code",[t._v("main.py")]),t._v("，如果 HttpApi 中控台上报正常，等待 1 分钟后检查主程序 "),s("code",[t._v("main.py")]),t._v(" 是否有报错，如果有，请按报错检查是 "),s("strong",[t._v("缺少依赖")]),t._v(" 还是 "),s("strong",[t._v("没有科学上网")]),t._v(" ，或者是 "),s("strong",[t._v("翻译配置错误")]),t._v("。"),s("br"),t._v("\n若没有，继续检查 "),s("code",[t._v("twitterConfig")]),t._v(" 文件夹下是否生成了 "),s("code",[t._v("new_time_账号id.txt")]),t._v(" ，这是一个内含检测指定的第 y 条推文发布时间的文件，可以检测是否有新推文。"),s("br"),t._v("\n如果一切正常，你将可以正常使用本插件，下一次该用户更新推文，你将会在 "),s("code",[t._v("qun.txt")]),t._v(" 内指定的群里看到推文消息。")]),t._v(" "),s("h2",{attrs:{id:"翻译功能的去除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#翻译功能的去除"}},[t._v("#")]),t._v(" 翻译功能的去除")]),t._v(" "),s("p",[t._v("假如你因为翻译模块出错或者不想使用 百度翻译 ，你可以进行剔除翻译功能或者更换翻译模块，在 "),s("code",[t._v("twitter/twitter.py")]),t._v(" 内，有如下内容：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("···\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把外文送进翻译模块")]),t._v("\n    fy"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" fanyi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在消息里添加译文")]),t._v("\n    fy"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'翻译:'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("fy\n···\n")])])]),s("p",[t._v("这就意味着你可以自由的改删翻译模块。")]),t._v(" "),s("h2",{attrs:{id:"翻译增强功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#翻译增强功能"}},[t._v("#")]),t._v(" 翻译增强功能")]),t._v(" "),s("p",[t._v("考虑到翻译软件是不可能完美翻译人名等，我们可以在 "),s("code",[t._v("twitterConfig/fy_plus.txt")]),t._v(" 内设定翻译增强，设定格式如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("用户的name(必须和上文name一致) 需要修正的字符串 修正之后的字符串\n")])])]),s("p",[t._v("例子："),s("br"),t._v("\n这个例子是把几个人名部分做翻译增强，防止翻译模块翻译错误，引发尴尬。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("湊あくあ 湊あくあ 湊阿夸\n湊あくあ あくあ 阿夸\n湊あくあ ちゃん 酱\n")])])]),s("p",[t._v("当然，不设定翻译增强设定也不会影响插件运作。")]),t._v(" "),s("h2",{attrs:{id:"更改推送检测时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更改推送检测时间"}},[t._v("#")]),t._v(" 更改推送检测时间")]),t._v(" "),s("p",[t._v("一般情况，我们的科学上网速度并不快，设定为 1 min 一次足矣，如果特别需要，可以参考 "),s("a",{attrs:{href:"https://apscheduler.readthedocs.io/en/latest/userguide.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("APScheduler指南"),s("OutboundLink")],1),t._v(" 更改 "),s("code",[t._v("twitter/__init__.py")]),t._v(" 内的检测时间。")])])}),[],!1,null,null,null);a.default=n.exports}}]);