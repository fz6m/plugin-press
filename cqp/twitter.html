<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TwitterPush | 桃饱の店</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/plugin-press/logo.png">
    <meta name="description" content="基于NoneBot的插件使用说明">
    <link rel="preload" href="/plugin-press/assets/css/0.styles.e81bf994.css" as="style"><link rel="preload" href="/plugin-press/assets/js/app.f0a2ab9c.js" as="script"><link rel="preload" href="/plugin-press/assets/js/2.3c0b8662.js" as="script"><link rel="preload" href="/plugin-press/assets/js/18.2ac38839.js" as="script"><link rel="prefetch" href="/plugin-press/assets/js/10.f9baf522.js"><link rel="prefetch" href="/plugin-press/assets/js/11.d3927324.js"><link rel="prefetch" href="/plugin-press/assets/js/12.62212e7d.js"><link rel="prefetch" href="/plugin-press/assets/js/13.bcc8170a.js"><link rel="prefetch" href="/plugin-press/assets/js/14.aa01c198.js"><link rel="prefetch" href="/plugin-press/assets/js/15.980c463c.js"><link rel="prefetch" href="/plugin-press/assets/js/16.4bc68a1f.js"><link rel="prefetch" href="/plugin-press/assets/js/17.4f776986.js"><link rel="prefetch" href="/plugin-press/assets/js/19.1a00a8c7.js"><link rel="prefetch" href="/plugin-press/assets/js/20.7952f865.js"><link rel="prefetch" href="/plugin-press/assets/js/3.7018fdb3.js"><link rel="prefetch" href="/plugin-press/assets/js/4.4bf8a227.js"><link rel="prefetch" href="/plugin-press/assets/js/5.255f25b5.js"><link rel="prefetch" href="/plugin-press/assets/js/6.40d4307b.js"><link rel="prefetch" href="/plugin-press/assets/js/7.2904ae23.js"><link rel="prefetch" href="/plugin-press/assets/js/8.2eec4d37.js"><link rel="prefetch" href="/plugin-press/assets/js/9.8dbd7c77.js">
    <link rel="stylesheet" href="/plugin-press/assets/css/0.styles.e81bf994.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/plugin-press/" class="home-link router-link-active"><!----> <span class="site-name">桃饱の店</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/plugin-press/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/plugin-press/cqp/" class="nav-link router-link-active">
  了解基础
</a></div><div class="nav-item"><a href="/plugin-press/guide/course.html" class="nav-link">
  从零开始
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件说明" class="dropdown-title"><span class="title">插件说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/twitter.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TwitterPush
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/image.html" class="nav-link">
  自定义表情包
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/repeater.html" class="nav-link">
  复读机
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/bestdori.html" class="nav-link">
  Bestdori 自制谱作图器
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/grail.html" class="nav-link">
  圣杯战争
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/marketing.html" class="nav-link">
  营销号文案生成
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/goodmorning.html" class="nav-link">
  早晚安
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/cp.html" class="nav-link">
  CP 小故事
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/hitokoto.html" class="nav-link">
  一言
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/rotating.html" class="nav-link">
  图片旋转
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/pixiv.html" class="nav-link">
  Pixiv 看图
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/fortune.html" class="nav-link">
  V 运势
</a></li></ul></div></div><div class="nav-item"><a href="/plugin-press/other/other.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/fz6m/nonebot-plugin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/plugin-press/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/plugin-press/cqp/" class="nav-link router-link-active">
  了解基础
</a></div><div class="nav-item"><a href="/plugin-press/guide/course.html" class="nav-link">
  从零开始
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件说明" class="dropdown-title"><span class="title">插件说明</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/twitter.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TwitterPush
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/image.html" class="nav-link">
  自定义表情包
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/repeater.html" class="nav-link">
  复读机
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/bestdori.html" class="nav-link">
  Bestdori 自制谱作图器
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/grail.html" class="nav-link">
  圣杯战争
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/marketing.html" class="nav-link">
  营销号文案生成
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/goodmorning.html" class="nav-link">
  早晚安
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/cp.html" class="nav-link">
  CP 小故事
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/hitokoto.html" class="nav-link">
  一言
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/rotating.html" class="nav-link">
  图片旋转
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/pixiv.html" class="nav-link">
  Pixiv 看图
</a></li><li class="dropdown-item"><!----> <a href="/plugin-press/cqp/fortune.html" class="nav-link">
  V 运势
</a></li></ul></div></div><div class="nav-item"><a href="/plugin-press/other/other.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/fz6m/nonebot-plugin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TwitterPush</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/plugin-press/cqp/twitter.html#部署流程" class="sidebar-link">部署流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/plugin-press/cqp/twitter.html#解压" class="sidebar-link">解压</a></li><li class="sidebar-sub-header"><a href="/plugin-press/cqp/twitter.html#配置翻译" class="sidebar-link">配置翻译</a></li><li class="sidebar-sub-header"><a href="/plugin-press/cqp/twitter.html#安装依赖" class="sidebar-link">安装依赖</a></li><li class="sidebar-sub-header"><a href="/plugin-press/cqp/twitter.html#设定用户" class="sidebar-link">设定用户</a></li><li class="sidebar-sub-header"><a href="/plugin-press/cqp/twitter.html#调试" class="sidebar-link">调试</a></li></ul></li><li><a href="/plugin-press/cqp/twitter.html#翻译功能的去除" class="sidebar-link">翻译功能的去除</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/plugin-press/cqp/twitter.html#翻译增强功能" class="sidebar-link">翻译增强功能</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/plugin-press/cqp/twitter.html#更改推送检测时间" class="sidebar-link">更改推送检测时间</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="twitterpush"><a href="#twitterpush" class="header-anchor">#</a> TwitterPush</h1> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在使用本插件之前，要确保你可以科学上网，因为获取要获取推文。</p></div> <h2 id="部署流程"><a href="#部署流程" class="header-anchor">#</a> 部署流程</h2> <h3 id="解压"><a href="#解压" class="header-anchor">#</a> 解压</h3> <p>将 <a href="https://github.com/fz6m/nonebot-plugin/releases" target="_blank" rel="noopener noreferrer">本插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下载解压，将解压得到的 <code>CQtwitter</code> 文件夹放在 酷Q 根目录下，为了保证路径不出错误，还要检查如下事项：<br>
保证你的 NoneBot 主程序 <code>main.py(这里假设为main.py)</code> 和 <code>twitter</code> 以及 <code>twitterConfig</code> 两个文件夹在同一级目录，文件夹 <code>CQtwitter</code> 里已经包含了一个示例主程序 <code>main.py</code> 可供参考，如果你还有其他插件，你可以直接把 <code>main.py</code> 中有关导入本插件的部分拷贝进你的主程序 <code>_.py</code> 文件。</p> <div class="language-python extra-class"><pre class="language-python"><code>    <span class="token comment">#导入本插件</span>
    nonebot<span class="token punctuation">.</span>load_plugins<span class="token punctuation">(</span>
        path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'twitter'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'twitter'</span>
    <span class="token punctuation">)</span>
</code></pre></div><h3 id="配置翻译"><a href="#配置翻译" class="header-anchor">#</a> 配置翻译</h3> <p>为了获得良好的推文体验，还需配置你的翻译模块，这里推荐免费的 <a href="https://api.fanyi.baidu.com/" target="_blank" rel="noopener noreferrer">百度翻译<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，即申请即用。<br>
申请之后你可以得到 百度 提供给你的 <code>appid</code> 与 <code>secretKey</code> ，配置在 <code>twitter/fanyi.py</code> 内即可。</p> <div class="language-python extra-class"><pre class="language-python"><code>appid <span class="token operator">=</span> <span class="token string">''</span>  <span class="token comment"># 你的appid</span>
secretKey <span class="token operator">=</span> <span class="token string">''</span>  <span class="token comment"># 你的密钥</span>
</code></pre></div><h3 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h3> <p>你需要安装本插件依赖的几个 python 库，如下：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>    pip <span class="token function">install</span> requests
    pip <span class="token function">install</span> bs4
</code></pre></div><h3 id="设定用户"><a href="#设定用户" class="header-anchor">#</a> 设定用户</h3> <p>下面在 <code>twitterConfig</code> 文件夹内设定转发推文的目标账户。首先，在 <code>user.txt</code> 内配置目标用户，参数说明和配置例子如下所示：</p> <table><thead><tr><th style="text-align:center;">参数</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;">id</td> <td style="text-align:left;">转推的账户</td></tr> <tr><td style="text-align:center;">x</td> <td style="text-align:left;">每次获取的推文数量，一般设为 2</td></tr> <tr><td style="text-align:center;">y</td> <td style="text-align:left;">每次要推送的推文在数组中的位置，如果该用户有置顶推文设为 1 ，如果没有设为 0</td></tr> <tr><td style="text-align:center;">name</td> <td style="text-align:left;">推文里称呼该用户的名字</td></tr></tbody></table> <p>格式：</p> <div class="language- extra-class"><pre class="language-text"><code>id x y name
</code></pre></div><p>例子：</p> <div class="language- extra-class"><pre class="language-text"><code>minatoaqua 2 1 湊あくあ
</code></pre></div><p>以上用户可以在 <code>user.txt</code>内配置多个，每个占一行。<br><br>
之后配置转发群的群号，在 <code>qun.txt</code> 内按行填写，格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>群号 需要推送的账号name(要与上文中name对应)
</code></pre></div><p>例子：</p> <div class="language- extra-class"><pre class="language-text"><code>12345678 湊あくあ
</code></pre></div><p>如果要一群多个推送，即填写多行。</p> <h3 id="调试"><a href="#调试" class="header-anchor">#</a> 调试</h3> <p>开始进行插件调试。<br>
启动 HttpApi 插件，之后启动你的主程序，我们这里假设的是 <code>main.py</code>，如果 HttpApi 中控台上报正常，等待 1 分钟后检查主程序 <code>main.py</code> 是否有报错，如果有，请按报错检查是 <strong>缺少依赖</strong> 还是 <strong>没有科学上网</strong> ，或者是 <strong>翻译配置错误</strong>。<br>
若没有，继续检查 <code>twitterConfig</code> 文件夹下是否生成了 <code>new_time_账号id.txt</code> ，这是一个内含检测指定的第 y 条推文发布时间的文件，可以检测是否有新推文。<br>
如果一切正常，你将可以正常使用本插件，下一次该用户更新推文，你将会在 <code>qun.txt</code> 内指定的群里看到推文消息。</p> <h2 id="翻译功能的去除"><a href="#翻译功能的去除" class="header-anchor">#</a> 翻译功能的去除</h2> <p>假如你因为翻译模块出错或者不想使用 百度翻译 ，你可以进行剔除翻译功能或者更换翻译模块，在 <code>twitter/twitter.py</code> 内，有如下内容：</p> <div class="language-python extra-class"><pre class="language-python"><code>···
    <span class="token comment"># 把外文送进翻译模块</span>
    fy<span class="token operator">=</span><span class="token keyword">await</span> fanyi<span class="token punctuation">.</span>fan<span class="token punctuation">(</span>fy<span class="token punctuation">)</span> 
    <span class="token comment"># 在消息里添加译文</span>
    fy<span class="token operator">=</span><span class="token string">'翻译:'</span><span class="token operator">+</span>fy
···
</code></pre></div><p>这就意味着你可以自由的改删翻译模块。</p> <h2 id="翻译增强功能"><a href="#翻译增强功能" class="header-anchor">#</a> 翻译增强功能</h2> <p>考虑到翻译软件是不可能完美翻译人名等，我们可以在 <code>twitterConfig/fy_plus.txt</code> 内设定翻译增强，设定格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>用户的name(必须和上文name一致) 需要修正的字符串 修正之后的字符串
</code></pre></div><p>例子：<br>
这个例子是把几个人名部分做翻译增强，防止翻译模块翻译错误，引发尴尬。</p> <div class="language- extra-class"><pre class="language-text"><code>湊あくあ 湊あくあ 湊阿夸
湊あくあ あくあ 阿夸
湊あくあ ちゃん 酱
</code></pre></div><p>当然，不设定翻译增强设定也不会影响插件运作。</p> <h2 id="更改推送检测时间"><a href="#更改推送检测时间" class="header-anchor">#</a> 更改推送检测时间</h2> <p>一般情况，我们的科学上网速度并不快，设定为 1 min 一次足矣，如果特别需要，可以参考 <a href="https://apscheduler.readthedocs.io/en/latest/userguide.html" target="_blank" rel="noopener noreferrer">APScheduler指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 更改 <code>twitter/__init__.py</code> 内的检测时间。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/19/2020, 8:43:13 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/plugin-press/assets/js/app.f0a2ab9c.js" defer></script><script src="/plugin-press/assets/js/2.3c0b8662.js" defer></script><script src="/plugin-press/assets/js/18.2ac38839.js" defer></script>
  </body>
</html>
